/** 
		This is Sparta!
 **/
(function(n) {
    var t, i, e, r, o;
    o = function(n) {
        var t = function() {
            return this.initialize ? this.initialize.apply(this, arguments) : void 0;
        };
        for (var i in n) n.hasOwnProperty(i) && (t.prototype[i] = n[i]);
        return console.log(t.prototype), t;
    }, t = function(n, t, e) {
        return 1 === i(r(n, t), r(n, e));
    }, i = function(n, t) {
        var i = n[0] * t[1] - n[1] * t[0];
        return i > 0 ? i = 1 : 0 > i && (i = 2), i;
    }, e = function(n, t, e) {
        return 2 === i(r(n, t), r(n, e));
    }, r = function(n, t) {
        return [ t[0] - n[0], t[1] - n[1] ];
    }, n.isLeft = t, n.isLR = i, n.isRight = e, n.vector = r, n.Type = o;
})("undefined" == typeof GLOBAL ? window.jeos = window.jeos || {} : GLOBAL.jeos = GLOBAL.jeos || {}), 
function(n) {
    var t, i, e;
    e = function(n) {
        var t, i = 0 > n[0] ? 0 - n[0] : n[0], e = 0 > n[1] ? 0 - n[1] : n[1];
        return t = i >= e ? e / i : 2 - i / e, 0 > n[0] && (t = 4 - t), 0 > n[1] && (t = 8 - t), 
        t;
    }, i = function(n, t) {
        return e(t) - e(n);
    }, t = function(n) {
        var t, i = 0 > n[0] ? 0 - n[0] : n[0], e = 0 > n[1] ? 0 - n[1] : n[1];
        return t = i > e ? e / i : 2 - i / e, 0 > n[0] && (t = 4 - t), 0 > n[1] && (t = 0 - t), 
        t;
    }, n.angle = e, n.orientedAngle = t, n.aV2V = i;
}("undefined" != typeof GLOBAL ? GLOBAL.jeos = GLOBAL.jeos || {} : window.jeos = window.jeos || {}), 
function(n) {
    var t, i = n.vector;
    t = function(t) {
        var e = t.reduce(function(n, t) {
            return [ n[0] + t[0], n[1] + t[1] ];
        });
        e[0] = e[0] / t.length, e[1] = e[1] / t.length;
        for (var r = function(t, r) {
            var o = n.aV2V(i(e, t), i(e, r));
            return o > 0 ? 1 : -1;
        }, o = t.length - 1, u = r(t[o], t[0]), s = 0; o > s; s++) u += r(t[s], t[s + 1]);
        return 0 > u ? t.slice(0).reverse() : t;
    }, n.antiClockWise = t;
}("undefined" != typeof GLOBAL ? GLOBAL.jeos : window.jeos), function(n) {
    var t = function(t, i) {
        var e = t.normal(10), r = t.p, o = t.q, u = i.p, s = i.q, f = n.isLR(e, n.vector(o, u)) | n.isLR(e, n.vector(r, u)), p = n.isLR(e, n.vector(o, s)) | n.isLR(e, n.vector(r, s));
        return p !== f ? !0 : 3 === p;
    }, i = function(n, t, i) {
        var e = i[0], r = i[1], o = n.pq[0], u = n.pq[1], s = n.p[0], f = n.p[1], p = t[0], c = t[1], a = e * o + r * u;
        if (0 === a) return 0/0;
        var h = s - p, v = f - c;
        return 0 - (r * v + e * h) / a;
    }, e = n.Type({
        next: null,
        previous: null,
        initialize: function(n, t) {
            this.p = n, this.q = t, this.pq = [ t[0] - n[0], t[1] - n[1] ];
        },
        indexOf: function(n) {
            return i(this, n, this.pq);
        },
        angle: function(n) {
            return Math.acos(this.internal(n) / (this.length() * n.length()));
        },
        distanceOfPoint: function(t) {
            var i = n.vector(this.p, t), e = i[0] * this.pq[1] - i[1] * this.pq[0];
            return Math.sqrt(e * e / (Math.pow(this.pq[0], 2) + Math.pow(this.pq[1], 2)));
        },
        internal: function(n) {
            return this.pq[0] * n.pq[0] + this.pq[1] * n.pq[1];
        },
        forOthers: function(n) {
            for (var t = this.next; null !== t && t !== this; ) n(t), t = t.next;
        },
        invert: function() {
            return new e(this.q, this.p);
        },
        isLeft: function(t) {
            var i = n.isLR(this.pq, n.vector(this.p, t.p));
            return 0 === i && (i = n.isLR(this.pq, n.vector(this.p, t.q))), 1 === i;
        },
        length: function() {
            var n = this.pq[0] * this.pq[0], t = this.pq[1] * this.pq[1];
            return Math.sqrt(n + t);
        },
        normal: function(n) {
            n /= n;
            var t = this.pq[0], i = this.pq[1];
            if (0 === t) return [ n, 0 ];
            if (0 === i) return [ 0, n ];
            var e = [ 0 - i * n / t, n ], r = Math.sqrt(Math.pow(e[0], 2) + Math.pow(e[1], 2));
            return [ e[0] / r, e[1] / r ];
        },
        pointAt: function(n) {
            return [ this.p[0] + this.pq[0] * n, this.p[1] + this.pq[1] * n ];
        },
        projects: function(n) {
            return t(this, n);
        },
        toString: function() {
            return "Edge([" + this.p + "], [" + this.q + "])";
        }
    });
    e.from = function(n) {
        for (var t = new e(n[0], n[1]), i = t, r = [ t ], o = null, u = n.length - 1, s = 1; u > s; s++) o = new e(n[s], n[s + 1]), 
        r.push(o), i.next = o, o.previous = i, i = o;
        return o = new e(n[n.length - 1], n[0]), i.next = o, o.previous = i, r.push(o), 
        o.next = t, t.previous = o, r;
    }, n.Edge = e;
}("undefined" != typeof window ? window.jeos = window.jeos || {} : GLOBAL.jeos = GLOBAL.jeos || {}), 
function(n) {
    var t = n.Edge, i = function(i) {
        this.edges = t.from(n.antiClockWise(i));
    }, e = function() {
        return function(n, t) {
            return n.pd < t.pd ? -1 : t.pd > n.pd ? 1 : 0;
        };
    }, r = function(n, t) {
        var i = n.distanceOfPoint(t.p), e = n.distanceOfPoint(t.q);
        return i > e ? {
            edge: t.invert(),
            pd: e,
            qd: i
        } : {
            edge: t,
            pd: i,
            qd: e
        };
    }, o = function(n, t, i) {
        return n >= t && i >= n;
    }, u = function(n, t) {
        var i = t.indexOf(n.p);
        o(i, 0, 1) || (i = t.indexOf(n.pointAt(n.indexOf(t.p))));
        var e = t.indexOf(n.q);
        o(e, 0, 1) || (e = t.indexOf(n.pointAt(n.indexOf(t.q))));
        var r = n.distanceOfPoint(t.pointAt(i)), u = n.distanceOfPoint(t.pointAt(e));
        return e > i ? [ i, e, r, u ] : [ e, i, u, r ];
    }, s = function(n, t) {
        return n.slice(0).filter(function(i, e) {
            return i.pd < t.qd ? (n.splice(e, 1), !0) : !1;
        });
    }, f = function(n, t) {
        var i = [];
        return t.forEach(function(t, e) {
            var r = Math.max(n[0], t[0]), o = Math.min(n[1], t[1]);
            o > r ? i.push(e) : r === o && i.push(e);
        }), i.length ? i : !1;
    }, p = function(n, t) {
        n.slice(0).forEach(function(n) {
            var i = f(n, t);
            i !== !1 && i.forEach(function(n) {
                console.log(n);
            });
        });
    }, c = function(n, t) {
        var i = (n[3] - n[2]) / (n[1] - n[0]);
        return n[2] + i * (t - n[0]);
    }, a = function(n, t, i) {
        i.forEach(function(i) {
            var e, r = t[i], o = n[0] <= r[0] ? [ n, r ] : [ r, n ], u = Math.max(o[0][0], o[1][0]), s = Math.min(o[0][1], o[1][1]);
            u === s ? e = o : s > u && (e = o.reduce(function(n, t) {
                var i = [];
                u > n[0] && i.push([ n[0], u, n[2], c(n, u) ]);
                var e = Math.min(c(n, u), t[2]);
                return Math.min(n[3], c(t, s)), i.push([ u, s, e, e ]), t[1] > s && i.push([ s, t[1], c(t, s), t[3] ]), 
                i;
            })), Array.prototype.splice.apply(t, [ i, 1 ].concat(e));
        });
    }, h = function(n, t, i) {
        for (var e = []; t.length; ) {
            var r = t.shift(), o = [ u(r.edge, n) ], c = s(t, r);
            c.forEach(function(t) {
                var i = u(t.edge, n), e = f(i, o);
                e ? a(i, o, e) : o.push(i);
            }), p(o, e), e = e.concat(o);
        }
        var h = [], v = function(t, i) {
            var e, r, o = n.pq[0], u = n.pq[1];
            0 !== o ? (r = 0 - o * i / n.length(), e = 0 - u / o * r) : (e = u * i / n.length(), 
            r = 0 - o / u * e);
            var s = n.pointAt(t);
            return [ s[0] + e, s[1] + r ];
        };
        return e.forEach(function(n) {
            var t = i(n[2]), e = i(n[3]);
            h.push(v(n[0], t)), h.push(v(n[1], e));
        }), h;
    };
    i.prototype.offset = function(n) {
        var t = this.edges, i = t.map(function(t) {
            var i = [];
            return t.forOthers(function(n) {
                t.projects(n) && t.isLeft(n) && n.isLeft(t) && i.push(r(t, n));
            }), i.sort(e(t)), h(t, i, n);
        });
        return i;
    }, n.WeightedOffset = i;
}("undefined" == typeof window ? GLOBAL.jeos = GLOBAL.jeos || {} : window.jeos = window.jeos || {});