(function(t){var n=function(t){var n=function(){return this.initialize?this.initialize.apply(this,arguments):void 0};for(var r in t)t.hasOwnProperty(r)&&(n.prototype[r]=t[r]);return n},r=function(t,n,r){return 1===i(u(t,n),u(t,r))},i=function(t,n){var r=t[0]*n[1]-t[1]*n[0];return r>0?r=1:0>r&&(r=2),r},e=function(t,n,r){return 2===i(u(t,n),u(t,r))},u=function(t,n){return[n[0]-t[0],n[1]-t[1]]};t.Type=n,t.vector=u,t.isLR=i,t.isRight=e,t.isLeft=r})(function(){return this.jeos={},this.jeos}()),function(t){var n,r,i;i=function(t){var n,r=0>t[0]?0-t[0]:t[0],i=0>t[1]?0-t[1]:t[1];return n=r>=i?i/r:2-r/i,0>t[0]&&(n=4-n),0>t[1]&&(n=8-n),n},r=function(t,n){return i(n)-i(t)},n=function(t){var n,r=0>t[0]?0-t[0]:t[0],i=0>t[1]?0-t[1]:t[1];return n=r>i?i/r:2-r/i,0>t[0]&&(n=4-n),0>t[1]&&(n=0-n),n},t.quadAngle=i,t.orientedAngle=n,t.aV2V=r}(function(){return this.jeos}()),function(t){var n,r=t.vector;n=function(n){var i=n.reduce(function(t,n){return[t[0]+n[0],t[1]+n[1]]});i[0]=i[0]/n.length,i[1]=i[1]/n.length;for(var e=function(n,e){var u=t.aV2V(r(i,n),r(i,e));return u>0?1:-1},u=n.length-1,o=e(n[u],n[0]),s=0;u>s;s++)o+=e(n[s],n[s+1]);return 0>o?n.slice(0).reverse():n},t.antiClockWise=n}(function(){return this.jeos}()),function(t){var n=function(n,r){var i=n.normal(10),e=n.p,u=n.q,o=r.p,s=r.q,f=t.isLR(i,t.vector(u,o))|t.isLR(i,t.vector(e,o)),c=t.isLR(i,t.vector(u,s))|t.isLR(i,t.vector(e,s));return c!==f?!0:3===c},r=function(t,n,r){var i=r[0],e=r[1],u=t.pq[0],o=t.pq[1],s=t.p[0],f=t.p[1],c=n[0],h=n[1],a=i*u+e*o;if(0===a)return 0/0;var p=s-c,v=f-h;return 0-(e*v+i*p)/a},i=t.Type({next:null,previous:null,initialize:function(t,n){this.p=t,this.q=n,this.pq=[n[0]-t[0],n[1]-t[1]]},indexOf:function(t){return r(this,t,this.pq)},angle:function(t){return Math.acos(this.internal(t)/(this.length()*t.length()))},distanceOfPoint:function(n){var r=t.vector(this.p,n),i=r[0]*this.pq[1]-r[1]*this.pq[0];return Math.sqrt(i*i/(Math.pow(this.pq[0],2)+Math.pow(this.pq[1],2)))},internal:function(t){return this.pq[0]*t.pq[0]+this.pq[1]*t.pq[1]},forOthers:function(t){for(var n=this.next;null!==n&&n!==this;)t(n),n=n.next},invert:function(){return new i(this.q,this.p)},isLeft:function(n){var r=t.isLR(this.pq,t.vector(this.p,n.p));return 0===r&&(r=t.isLR(this.pq,t.vector(this.p,n.q))),1===r},length:function(){var t=this.pq[0]*this.pq[0],n=this.pq[1]*this.pq[1];return Math.sqrt(t+n)},normal:function(t){t/=t;var n=this.pq[0],r=this.pq[1];if(0===n)return[t,0];if(0===r)return[0,t];var i=[0-r*t/n,t],e=Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2));return[i[0]/e,i[1]/e]},pointAt:function(t){return[this.p[0]+this.pq[0]*t,this.p[1]+this.pq[1]*t]},projects:function(t){return n(this,t)},toString:function(){return"Edge(["+this.p+"], ["+this.q+"])"}});i.from=function(t){for(var n=new i(t[0],t[1]),r=n,e=[n],u=null,o=t.length-1,s=1;o>s;s++)u=new i(t[s],t[s+1]),e.push(u),r.next=u,u.previous=r,r=u;return u=new i(t[t.length-1],t[0]),r.next=u,u.previous=r,e.push(u),u.next=n,n.previous=u,e},t.Edge=i}(function(){return this.jeos}()),function(t){var n=t.Edge,r=function(r){this.edges=n.from(t.antiClockWise(r))},i=function(){return function(t,n){return t.pd<n.pd?-1:n.pd>t.pd?1:0}},e=function(t,n){var r=t.distanceOfPoint(n.p),i=t.distanceOfPoint(n.q);return r>i?{edge:n.invert(),pd:i,qd:r}:{edge:n,pd:r,qd:i}},u=function(t,n,r){return t>=n&&r>=t},o=function(t,n){var r=n.indexOf(t.p);u(r,0,1)||(r=n.indexOf(t.pointAt(t.indexOf(n.p))));var i=n.indexOf(t.q);u(i,0,1)||(i=n.indexOf(t.pointAt(t.indexOf(n.q))));var e=t.distanceOfPoint(n.pointAt(r)),o=t.distanceOfPoint(n.pointAt(i));return i>r?[r,i,e,o]:[i,r,o,e]},s=function(t,n){return t.slice(0).filter(function(r,i){return r.pd<n.qd?(t.splice(i,1),!0):!1})},f=function(t,n){var r=[];return n.forEach(function(n,i){var e=Math.max(t[0],n[0]),u=Math.min(t[1],n[1]);u>e?r.push(i):e===u&&r.push(i)}),r.length?r:!1},c=function(t,n){t.slice(0).forEach(function(t){var r=f(t,n);r!==!1&&r.forEach(function(){})})},h=function(t,n){var r=(t[3]-t[2])/(t[1]-t[0]);return t[2]+r*(n-t[0])},a=function(t,n,r){r.forEach(function(r){var i,e=n[r],u=t[0]<=e[0]?[t,e]:[e,t],o=Math.max(u[0][0],u[1][0]),s=Math.min(u[0][1],u[1][1]);o===s?i=u:s>o&&(i=u.reduce(function(t,n){var r=[];o>t[0]&&r.push([t[0],o,t[2],h(t,o)]);var i=Math.min(h(t,o),n[2]);return Math.min(t[3],h(n,s)),r.push([o,s,i,i]),n[1]>s&&r.push([s,n[1],h(n,s),n[3]]),r})),Array.prototype.splice.apply(n,[r,1].concat(i))})},p=function(t,n,r){for(var i=[];n.length;){var e=n.shift(),u=[o(e.edge,t)],h=s(n,e);h.forEach(function(n){var r=o(n.edge,t),i=f(r,u);i?a(r,u,i):u.push(r)}),c(u,i),i=i.concat(u)}var p=[],v=function(n,r){var i,e,u=t.pq[0],o=t.pq[1];0!==u?(e=0-u*r/t.length(),i=0-o/u*e):(i=o*r/t.length(),e=0-u/o*i);var s=t.pointAt(n);return[s[0]+i,s[1]+e]};return i.forEach(function(t){var n=r(t[2]),i=r(t[3]);p.push(v(t[0],n)),p.push(v(t[1],i))}),p};r.prototype.offset=function(t){var n=this.edges,r=n.map(function(n){var r=[];return n.forOthers(function(t){n.projects(t)&&n.isLeft(t)&&t.isLeft(n)&&r.push(e(n,t))}),r.sort(i(n)),p(n,r,t)});return r},t.WeightedOffset=r}(function(){return this.jeos}());